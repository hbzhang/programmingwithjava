{"data":{"site":{"siteMetadata":{"siteUrl":"http://ghost.local:8000","title":"Ghost Docs","description":"Everything you need to know about working with the Ghost professional publishing platform."}},"ghostPost":{"title":"Upgrade to Ghost 2.0","slug":"upgrade-to-ghost-2-0","featured":false,"feature_image":null,"created_at_pretty":"13 October, 2018","published_at_pretty":"16 October, 2018","updated_at_pretty":"19 April, 2019","created_at":"2018-10-13T10:58:25.000+00:00","published_at":"2018-10-16T03:52:42.000+00:00","updated_at":"2019-04-19T14:19:57.000+00:00","excerpt":"How to upgrade to Ghost 2.0 - with minimal breaking changes and a smooth upgrade process via the Ghost-CLI tool! ","meta_title":"Upgrade to Ghost 2.0 - Tutorial","meta_description":"A guide to upgrading to Ghost 2.0 for self-hosted developers managing a Ghost publication!","og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null},"primary_tag":{"name":"Self-hosting","slug":"self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null,"meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","visibility":"public"},"tags":[{"name":"Self-hosting","slug":"self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null,"meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","visibility":"public"},{"name":"#faq","slug":"hash-faq","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"internal"}],"plaintext":"Ghost 2.0 was released in September 2018 and the second major upgrade since the\nplatform launched. This update includes a new editor, a flexible configuration\nlayer called dynamic routing, and lots of exciting new features\n[https://blog.ghost.org/2-0/]. \n\nThere are minimal breaking changes for the Ghost 2.0 upgrade, which runs\nsmoothly using ghost-cli. \n\n> This guide is useful for all self-hosted Ghost users. If you are using \nGhost(Pro) [https://ghost.org/pricing/]  then you are automatically upgraded to\nthe latest version.\nWhy upgrade to 2.0?\nUsing the latest version of Ghost is recommended to ensure that your site is\nsecure and so that you have access to all of the latest features.\n\nIf you are still running a Ghost LTS version (0.x), upgrade to Ghost 1.0 before\nupgrading to 2.0 — follow the upgrading to Ghost 1.0 guide\n[https://docs.ghost.org/faq/upgrade-to-ghost-1-0/]. Here’s more information\nabout version history and end of life support\n[https://docs.ghost.org/faq/major-versions-lts/].\n\n\n--------------------------------------------------------------------------------\n\nPrerequisites\nIt is only possible to upgrade to Ghost 2.0 from versions 1.0 or higher, using\nthe latest Ghost CLI version. Here's a breakdown of the required steps:\n\n 1. Prepare your theme\n 2. Make a backup\n 3. Install the latest Ghost CLI version\n 4. Update Ghost\n\n\n--------------------------------------------------------------------------------\n\nPrepare your theme\nThe new editor in Ghost 2.0 comes with powerful rich editing features that\nrequire additional CSS in your theme. There are minimal breaking changes to\nthemes which will require some attention prior to upgrading to 2.0.\n\nCheck theme compatibility using GScan\nThe fastest way to check your theme compatibility is using the tool gscan\n[https://gscan.ghost.org]. It allows you to upload a zip file of your current\ntheme to check for errors, deprecations and other compatibility issues.\n\n 1. Download your current active theme as a .zip from the design settings page\n    in Ghost admin\n 2. Upload this file on the GScan page [https://gscan.ghost.org]\n 3. Select 2.0.0 as the Ghost version to check your theme for this upgrade\n\nThe tool lists all errors and provide a full explanation and description of how\nto update your theme. All items listed as “must fix” are required to be updated\nwithin your theme for the 2.0.0 upgrade. Items listed as “consider fixing” are\nrecommended to ensure future upgrades are smoother. \n\nFor further information about theme support for the latest version Ghost, use\nthe handlebars theme documentation\n[https://docs.ghost.org/api/handlebars-themes/content/]. Once your theme is\nready for the upgrade, proceed to the next step.\n\n\n--------------------------------------------------------------------------------\n\nBackup your content\nThe recommended Ghost 2.0 upgrade using ghost-cli  is designed to be pain free,\nbut we always recommend making a backup of your content before any major\nupgrades, particularly if you are running any form of custom install. \n\nIt takes less than two minutes to create a full backup of your site content, so\nmake sure you follow this step.\n\nJSON export\nRetrieve an up-to-date JSON export from the Ghost admin in the labs section,\nwhich can be accessed at yourdomain.com/ghost/settings/labs/. This downloads a\nJSON export file that you can save in case of emergencies.\n\nContent folder backup\nAll user-provided data such as images and themes exist in the /content/  folder.\n\nWe strongly recommend making a copy of these files. To do this run the following\ncommand on your sever:\n\ncp -r content /tmp/content-backup\n\n\n\n--------------------------------------------------------------------------------\n\nInstall the latest Ghost CLI version\nThe Ghost 2.0 upgrade requires version 1.9.0 or higher of Ghost-CLI.\n\nIf you followed the supported install guide to production, the server setup has\na single system-wide version of node.js. The install and update command for \nghost-cli  can be used:\n\nsudo npm i -g ghost-cli@latest\n\n\nor if you used yarn:\n\nsudo yarn global add ghost-cli@latest\n\n\n\n--------------------------------------------------------------------------------\n\nUpdate Ghost\nIn your terminal cd into your publication’s directory and run the update\ncommand: ghost update. Ghost CLI checks that everything is ready for the upgrade\nand inform you if there are any extra steps required. \n\nOnce all checks have been passed the upgrade installs and you’ll be running\nGhost 2.0. \n\nChecking your theme ✅\nThe CLI will check your active theme for compatibility during the update\nprocess. Providing you followed the steps within this guide, you should see: \n\nChecking theme compatibility for Ghost 2.0.0\n\n✔ Your theme is compatible.\n\nVisit the demo post at http://localhost:2370/p/a8501e8d-0d43-49ae-81b2-e5031c98d952/ to see how your theme looks like in Ghost 2.0\nYou can also check theme compatibility at https://gscan.ghost.org\n\n? Are you sure you want to proceed with migrating to Ghost 2.0.0? (Y/n)\n\n\nOnce accepted, all existing posts have the <div class=\"kg-card-markdown\"> \nwrapper element removed from the {{content}}  output. \n\nWe highly recommend opening the demo post URL provided to perform a final check\nto make sure the post displays as expected before proceeding.\n\n\n--------------------------------------------------------------------------------\n\nWhat to do when an upgrade fails\nThe most common reason for a failed upgrade is running out of memory. Ensure you\nhave enough memory or configure swap memory on your server. If your install\nfails and you can't find a specific solution you run ghost uninstall and then\ntry ghost install again.\n\nGhost accepts two optional flags for the ghost update  command:\n\nForce\nIf ghost update fails, the first thing to try is ghost update --force  to retry\nthe update.\n\nRollback\nIf your ghost install is in a broken state after updating, you can use\nghost update --rollback  to get back to the previous stable version.\n\nOnce you've stabilised and resolved any underlying problems, go into /version \nand remove the broken version. Then run ghost update  again. Use ghost --version \n to see what version is currently being used.\n\nIf you run into any other errors, use the search function on this site to find\ntroubleshooting guides for common issues, or head to the community forum\n[https://forum.ghost.org/].\n\n\n--------------------------------------------------------------------------------\n\nSummary\nFollowing this guide you have upgraded to Ghost 2.0 using the Ghost CLI, after\nmaking any necessary changes to your theme. You now have access to all of the\nfeatures inside Ghost 2.0.","html":"<p>Ghost 2.0 was released in September 2018 and the second major upgrade since the platform launched. This update includes a new editor, a flexible configuration layer called <em>dynamic routing</em>, and lots of exciting <a href=\"https://blog.ghost.org/2-0/\" rel=\"noreferrer nofollow noopener\">new features</a>. </p><p>There are minimal breaking changes for the Ghost 2.0 upgrade, which runs smoothly using <code>ghost-cli</code>. </p><blockquote><em>This guide is useful for all self-hosted Ghost users. If you are using <a href=\"https://ghost.org/pricing/\" rel=\"noreferrer nofollow noopener\"><strong>Ghost(Pro)</strong></a><strong> </strong>then you are automatically upgraded to the latest version.</em></blockquote><h3 id=\"why-upgrade-to-2-0\">Why upgrade to 2.0?</h3><p>Using the latest version of Ghost is recommended to ensure that your site is secure and so that you have access to all of the latest features.</p><p>If you are still running a Ghost LTS version (0.x), upgrade to Ghost 1.0 before upgrading to 2.0 — follow the <a href=\"https://docs.ghost.org/faq/upgrade-to-ghost-1-0/\">upgrading to Ghost 1.0 guide</a>. Here’s more information about <a href=\"https://docs.ghost.org/faq/major-versions-lts/\">version history and end of life support</a>.</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"prerequisites\">Prerequisites</h2><p>It is only possible to upgrade to Ghost 2.0 from versions 1.0 or higher, using the latest Ghost CLI version. Here's a breakdown of the required steps:</p><ol><li>Prepare your theme</li><li>Make a backup</li><li>Install the latest Ghost CLI version</li><li>Update Ghost</li></ol><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"prepare-your-theme\">Prepare your theme</h2><p>The new editor in Ghost 2.0 comes with powerful rich editing features that require additional CSS in your theme. There are minimal breaking changes to themes which will require some attention prior to upgrading to 2.0.</p><h3 id=\"check-theme-compatibility-using-gscan\">Check theme compatibility using GScan</h3><p>The fastest way to check your theme compatibility is using the tool <a href=\"https://gscan.ghost.org\" rel=\"noreferrer nofollow noopener\">gscan</a>. It allows you to upload a zip file of your current theme to check for errors, deprecations and other compatibility issues.</p><ol><li>Download your current active theme as a .zip from the design settings page in Ghost admin</li><li>Upload this file on the <a href=\"https://gscan.ghost.org\" rel=\"noreferrer nofollow noopener\">GScan page</a></li><li>Select 2.0.0 as the Ghost version to check your theme for this upgrade</li></ol><p>The tool lists all errors and provide a full explanation and description of how to update your theme. All items listed as “must fix” are required to be updated within your theme for the 2.0.0 upgrade. Items listed as “consider fixing” are recommended to ensure future upgrades are smoother. </p><p>For further information about theme support for the latest version Ghost, use the <a href=\"https://docs.ghost.org/api/handlebars-themes/content/\">handlebars theme documentation</a>. Once your theme is ready for the upgrade, proceed to the next step.</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"backup-your-content\">Backup your content</h2><p>The recommended Ghost 2.0 upgrade using <code>ghost-cli</code> is designed to be pain free, but we always recommend making a backup of your content before any major upgrades, particularly if you are running any form of custom install. </p><p>It takes less than two minutes to create a full backup of your site content, so make sure you follow this step.</p><h3 id=\"json-export\">JSON export</h3><p>Retrieve an up-to-date JSON export from the Ghost admin in the labs section, which can be accessed at <code>yourdomain.com/ghost/settings/labs/</code>. This downloads a JSON export file that you can save in case of emergencies.</p><h3 id=\"content-folder-backup\">Content folder backup</h3><p>All user-provided data such as images and themes exist in the <code>/content/</code> folder.</p><p>We strongly recommend making a copy of these files. To do this run the following command on your sever:</p><!--kg-card-begin: markdown--><pre><code class=\"language-bash\">cp -r content /tmp/content-backup\n</code></pre>\n<!--kg-card-end: markdown--><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"install-the-latest-ghost-cli-version\">Install the latest Ghost CLI version</h2><p>The Ghost 2.0 upgrade requires version 1.9.0 or higher of Ghost-CLI.</p><p>If you followed the supported install guide to production, the server setup has a single system-wide version of node.js. The install and update command for <br><code>ghost-cli</code> can be used:</p><!--kg-card-begin: markdown--><pre><code class=\"language-bash\">sudo npm i -g ghost-cli@latest\n</code></pre>\n<!--kg-card-end: markdown--><p>or if you used yarn:</p><!--kg-card-begin: markdown--><pre><code class=\"language-bash\">sudo yarn global add ghost-cli@latest\n</code></pre>\n<!--kg-card-end: markdown--><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"update-ghost\">Update Ghost</h2><p>In your terminal cd into your publication’s directory and run the update command: <code>ghost update</code>. Ghost CLI checks that everything is ready for the upgrade and inform you if there are any extra steps required. </p><p>Once all checks have been passed the upgrade installs and you’ll be running Ghost 2.0. </p><h3 id=\"checking-your-theme-\">Checking your theme ✅</h3><p>The CLI will check your active theme for compatibility during the update process. Providing you followed the steps within this guide, you should see: </p><!--kg-card-begin: markdown--><pre><code class=\"language-bash\">Checking theme compatibility for Ghost 2.0.0\n\n✔ Your theme is compatible.\n\nVisit the demo post at http://localhost:2370/p/a8501e8d-0d43-49ae-81b2-e5031c98d952/ to see how your theme looks like in Ghost 2.0\nYou can also check theme compatibility at https://gscan.ghost.org\n\n? Are you sure you want to proceed with migrating to Ghost 2.0.0? (Y/n)\n</code></pre>\n<!--kg-card-end: markdown--><p>Once accepted, all existing posts have the <code>&lt;div class=\"kg-card-markdown\"&gt;</code> wrapper element removed from the <code>{{content}}</code> output. </p><p>We highly recommend opening the demo post URL provided to perform a final check to make sure the post displays as expected before proceeding.</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"what-to-do-when-an-upgrade-fails\">What to do when an upgrade fails</h2><p>The most common reason for a failed upgrade is running out of memory. Ensure you have enough memory or configure swap memory on your server. If your install fails and you can't find a specific solution you run ghost uninstall and then try ghost install again.</p><p>Ghost accepts two optional flags for the <code>ghost update</code> command:</p><h3 id=\"force\">Force</h3><p>If ghost update fails, the first thing to try is <code>ghost update --force</code> to retry the update.</p><h3 id=\"rollback\">Rollback</h3><p>If your ghost install is in a broken state after updating, you can use<br><code>ghost update --rollback</code> to get back to the previous stable version.</p><p>Once you've stabilised and resolved any underlying problems, go into <code>/version</code> and remove the broken version. Then run <code>ghost update</code> again. Use <code>ghost --version</code> to see what version is currently being used.</p><p>If you run into any other errors, use the search function on this site to find troubleshooting guides for common issues, or head to the community <a href=\"https://forum.ghost.org/\">forum</a>.</p><!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><h2 id=\"summary\">Summary</h2><p>Following this guide you have upgraded to Ghost 2.0 using the Ghost CLI, after making any necessary changes to your theme. You now have access to all of the features inside Ghost 2.0. </p>","custom_template":null,"url":"https://docs.ghost.io/upgrade-to-ghost-2-0/","uuid":"4218bd07-3dc3-4abc-ac04-3b20128a9625","page":false,"codeinjection_foot":null,"codeinjection_head":null,"comment_id":"5bc1cfd194250c00bf9d3b75"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"upgrade-to-ghost-2-0","relatedPosts":[{"node":{"slug":"migrating-from-wordpress-to-ghost","title":"Migrating from WordPress to Ghost","url":"/faq/migrating-from-wordpress-to-ghost/","published_at":"2019-04-22T15:50:47.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs – Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"general","name":"General","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"docker","title":"Docker","url":"/faq/docker/","published_at":"2019-04-16T10:44:57.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"change-configured-site-url","title":"How do I change my configured site URL?","url":"/faq/change-configured-site-url/","published_at":"2019-01-18T15:35:27.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"clustering-sharding-multi-server","title":"Clustering, sharding and other multi-server setups","url":"/faq/clustering-sharding-multi-server/","published_at":"2018-10-17T03:28:49.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"upgrade-to-ghost-1-0","title":"Upgrade to Ghost 1.0","url":"/faq/upgrade-to-ghost-1-0/","published_at":"2018-10-16T04:02:37.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}}],"section":"faq"}}