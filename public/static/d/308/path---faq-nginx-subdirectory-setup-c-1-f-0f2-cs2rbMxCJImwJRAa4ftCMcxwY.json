{"data":{"site":{"siteMetadata":{"siteUrl":"http://ghost.local:8000","title":"Ghost Docs","description":"Everything you need to know about working with the Ghost professional publishing platform."}},"ghostPost":{"title":"Nginx Subdirectory Setup","slug":"nginx-subdirectory-setup","featured":false,"feature_image":null,"created_at_pretty":"27 March, 2019","published_at_pretty":"28 March, 2019","updated_at_pretty":"28 March, 2019","created_at":"2019-03-27T16:03:14.000+00:00","published_at":"2019-03-28T08:58:07.000+00:00","updated_at":"2019-03-28T08:58:07.000+00:00","excerpt":"It's possible to setup a reverse proxy using an nginx configuration to establish\na subdirectory on Ghost(Pro). \n\nFor this configuration to work successfully, you must be on a Business plan with\na subdirectory enabled via support@ghost.org. You must also paste the exact\nconfiguration below into your nginx configuration file, updating each line as\nspecified so that it meets our reverse proxy rules\n[https://docs.ghost.org/faq/can-i-run-ghost-from-a-subdirectory/#reverse-proxy-rules]\n.\n\n> The below ","meta_title":null,"meta_description":"It's possible to setup a reverse proxy using an nginx configuration to establish a subdirectory on Ghost(Pro) with some custom configuration. Find out how ðŸ‘‰","og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Sarah Frantz","slug":"sarah","bio":null,"profile_image":"//www.gravatar.com/avatar/930a564053be3c38824dfee3e89d2074?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Sarah Frantz","slug":"sarah","bio":null,"profile_image":"//www.gravatar.com/avatar/930a564053be3c38824dfee3e89d2074?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null},"primary_tag":{"name":"Ghost(Pro)","slug":"ghost-pro","description":"Commonly asked questions and support for Ghost(Pro) customers!","feature_image":null,"meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","visibility":"public"},"tags":[{"name":"Ghost(Pro)","slug":"ghost-pro","description":"Commonly asked questions and support for Ghost(Pro) customers!","feature_image":null,"meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","visibility":"public"},{"name":"#faq","slug":"hash-faq","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"internal"}],"plaintext":"It's possible to setup a reverse proxy using an nginx configuration to establish\na subdirectory on Ghost(Pro). \n\nFor this configuration to work successfully, you must be on a Business plan with\na subdirectory enabled via support@ghost.org. You must also paste the exact\nconfiguration below into your nginx configuration file, updating each line as\nspecified so that it meets our reverse proxy rules\n[https://docs.ghost.org/faq/can-i-run-ghost-from-a-subdirectory/#reverse-proxy-rules]\n.\n\n> The below configuration has been tested and works with these exact settings if\nthere are no conflicting top-level config issues. \nserver {\n    listen 80;\n\n    server_name <yourdomain.com>; # Replace with your domain\n\n    # include any global or shared config\n    # include /etc/nginx/conf/your-config-here.conf;\n \n    # redirect to SSL\n    return 301 https://$host$request_uri; \n}\n\nserver {\n    listen 443 ssl default_server;\n\n    server_name <yourdomain.com>; # Replace with your domain\n\n    # Your SSL Certificate details. Replace with your own SSL setup\n    # ssl_certificate /path/to/cert;\n    # ssl_certificate_key /path/to/key;\n\n    location /blog/ {\n        client_max_body_size 10G; # Required for uploading large files\n    \n        # Proxy Settings, all required\n        resolver 1.1.1.1 8.8.8.8; # Prevent caching the upstream IP - use preferred DNS resolvers or leave as default\n        set $ghost_url https://<yoursubdomain>.ghost.io; # Replace with your subdomain\n        proxy_pass $ghost_url; # Variable name must match line above, use of variable required for resolver\n        proxy_redirect off;\n        proxy_set_header Host <yoursubdomain>.ghost.io; # Replace with your subdomain\n        proxy_set_header X-Forwarded-Host <yourdomain.com>; # Replace with your domain\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}","html":"<p>It's possible to setup a reverse proxy using an nginx configuration to establish a subdirectory on Ghost(Pro). </p><p>For this configuration to work successfully, you must be on a Business plan with a subdirectory enabled via <a href=\"mailto:support@ghost.org\">support@ghost.org</a>. You must also paste the exact configuration below into your nginx configuration file, updating each line as specified so that it meets our <a href=\"https://docs.ghost.org/faq/can-i-run-ghost-from-a-subdirectory/#reverse-proxy-rules\">reverse proxy rules</a>.</p><blockquote>The below configuration has been tested and works with these exact settings if there are no conflicting top-level config issues. </blockquote><!--kg-card-begin: code--><pre><code>server {\n    listen 80;\n\n    server_name &lt;yourdomain.com&gt;; # Replace with your domain\n\n    # include any global or shared config\n    # include /etc/nginx/conf/your-config-here.conf;\n \n    # redirect to SSL\n    return 301 https://$host$request_uri; \n}\n\nserver {\n    listen 443 ssl default_server;\n\n    server_name &lt;yourdomain.com&gt;; # Replace with your domain\n\n    # Your SSL Certificate details. Replace with your own SSL setup\n    # ssl_certificate /path/to/cert;\n    # ssl_certificate_key /path/to/key;\n\n    location /blog/ {\n        client_max_body_size 10G; # Required for uploading large files\n    \n        # Proxy Settings, all required\n        resolver 1.1.1.1 8.8.8.8; # Prevent caching the upstream IP - use preferred DNS resolvers or leave as default\n        set $ghost_url https://&lt;yoursubdomain&gt;.ghost.io; # Replace with your subdomain\n        proxy_pass $ghost_url; # Variable name must match line above, use of variable required for resolver\n        proxy_redirect off;\n        proxy_set_header Host &lt;yoursubdomain&gt;.ghost.io; # Replace with your subdomain\n        proxy_set_header X-Forwarded-Host &lt;yourdomain.com&gt;; # Replace with your domain\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}</code></pre><!--kg-card-end: code-->","custom_template":null,"url":"https://docs.ghost.io/nginx-subdirectory-setup/","uuid":"70ac456b-e463-4d01-8b2e-f1f979c91dad","page":false,"codeinjection_foot":null,"codeinjection_head":null,"comment_id":"5c9b9ec28b805000c00450db"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"nginx-subdirectory-setup","relatedPosts":[{"node":{"slug":"migrating-from-wordpress-to-ghost","title":"Migrating from WordPress to Ghost","url":"/faq/migrating-from-wordpress-to-ghost/","published_at":"2019-04-22T15:50:47.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"general","name":"General","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"apache-subdirectory-setup","title":"Apache Subdirectory Setup","url":"/faq/apache-subdirectory-setup/","published_at":"2019-03-28T08:57:25.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"cloudfront-subdirectory-setup","title":"CloudFront Subdirectory Setup","url":"/faq/cloudfront-subdirectory-setup/","published_at":"2019-03-22T13:33:13.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"hover-domain-setup-guide","title":"Hover domain setup guide","url":"/faq/hover-domain-setup-guide/","published_at":"2018-10-10T14:24:48.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"google-domain-setup-guide","title":"Google domain setup guide","url":"/faq/google-domain-setup-guide/","published_at":"2018-10-08T21:55:14.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"Ghost(Pro) FAQs â€“ Find answers & support for your site","meta_description":"If you get stuck, browse our commonly asked questions, or contact email support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}}],"section":"faq"}}