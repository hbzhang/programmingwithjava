{"expireTime":9007200813127425000,"key":"transformer-remark-markdown-html-ast-95dbc0949411e7d8ecc74fbc6be73e6e-gatsby-remark-imagesgatsby-remark-snippetsgatsby-remark-autolink-headersgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-external-links-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's possible to send your publication's images to a 3rd party service, CDN or database using a custom storage module. ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":120,"offset":120}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":120,"offset":120}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"overview"},"children":[{"type":"element","tagName":"a","properties":{"href":"#overview","aria-label":"overview permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":125},"end":{"line":4,"column":12,"offset":133}}}],"position":{"start":{"line":4,"column":1,"offset":122},"end":{"line":4,"column":12,"offset":133}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The storage layer is used to store images from an upload admin UI, from the API, and also when images are included in a zip file uploaded to the importer. Using a custom storage module allows you to change where images are stored without changing Ghost core. ","position":{"start":{"line":5,"column":1,"offset":134},"end":{"line":5,"column":260,"offset":393}}}],"position":{"start":{"line":5,"column":1,"offset":134},"end":{"line":5,"column":260,"offset":393}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"using-a-custom-storage-adapter"},"children":[{"type":"element","tagName":"a","properties":{"href":"#using-a-custom-storage-adapter","aria-label":"using a custom storage adapter permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Using a custom storage adapter","position":{"start":{"line":8,"column":4,"offset":399},"end":{"line":8,"column":34,"offset":429}}}],"position":{"start":{"line":8,"column":1,"offset":396},"end":{"line":8,"column":34,"offset":429}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By default Ghost stores images on your filesystem. The default location is the Ghost content path in your Ghost folder under ","position":{"start":{"line":10,"column":1,"offset":431},"end":{"line":10,"column":126,"offset":556}}},{"type":"raw","value":"<code class=\"language-text\">content/images</code>","position":{"start":{"line":10,"column":126,"offset":556},"end":{"line":10,"column":142,"offset":572}}},{"type":"text","value":", or an alternative custom content path that you have configured. ","position":{"start":{"line":10,"column":142,"offset":572},"end":{"line":10,"column":208,"offset":638}}}],"position":{"start":{"line":10,"column":1,"offset":431},"end":{"line":10,"column":208,"offset":638}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In order to use a custom storage adapter, your custom configuration file needs to be updated to provide config for your new storage module and set it as active:","position":{"start":{"line":12,"column":1,"offset":640},"end":{"line":12,"column":161,"offset":800}}}],"position":{"start":{"line":12,"column":1,"offset":640},"end":{"line":12,"column":161,"offset":800}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">storage<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    active<span class=\"token operator\">:</span> 'my-module'<span class=\"token punctuation\">,</span>\n    'my-module'<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        key<span class=\"token operator\">:</span> 'abcdef'\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":14,"column":1,"offset":802},"end":{"line":21,"column":4,"offset":898}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The storage block should have 2 items:","position":{"start":{"line":23,"column":1,"offset":900},"end":{"line":23,"column":39,"offset":938}}}],"position":{"start":{"line":23,"column":1,"offset":900},"end":{"line":23,"column":39,"offset":938}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"An active key, which contains the name* of your module","position":{"start":{"line":25,"column":3,"offset":942},"end":{"line":25,"column":57,"offset":996}}}],"position":{"start":{"line":25,"column":1,"offset":940},"end":{"line":25,"column":57,"offset":996}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"A key which reflects the name* of your module, containing any config your module needs","position":{"start":{"line":26,"column":3,"offset":999},"end":{"line":26,"column":89,"offset":1085}}}],"position":{"start":{"line":26,"column":1,"offset":997},"end":{"line":26,"column":89,"offset":1085}}},{"type":"text","value":"\n"}],"position":{"start":{"line":25,"column":1,"offset":940},"end":{"line":26,"column":89,"offset":1085}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"available-custom-storage-adapters"},"children":[{"type":"element","tagName":"a","properties":{"href":"#available-custom-storage-adapters","aria-label":"available custom storage adapters permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Available custom storage adapters","position":{"start":{"line":29,"column":4,"offset":1091},"end":{"line":29,"column":37,"offset":1124}}}],"position":{"start":{"line":29,"column":1,"offset":1088},"end":{"line":29,"column":37,"offset":1124}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/TryGhost/Ghost/blob/0304816/core/server/storage/local-file-store.js","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"local-file-store","position":{"start":{"line":31,"column":4,"offset":1129},"end":{"line":31,"column":20,"offset":1145}}}],"position":{"start":{"line":31,"column":3,"offset":1128},"end":{"line":31,"column":109,"offset":1234}}},{"type":"text","value":" (default) saves images to the local filesystem","position":{"start":{"line":31,"column":109,"offset":1234},"end":{"line":31,"column":156,"offset":1281}}}],"position":{"start":{"line":31,"column":1,"offset":1126},"end":{"line":31,"column":156,"offset":1281}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ErisDS/559e11bf3e84b89a9594","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"http-store passes","position":{"start":{"line":32,"column":4,"offset":1285},"end":{"line":32,"column":21,"offset":1302}}}],"position":{"start":{"line":32,"column":3,"offset":1284},"end":{"line":32,"column":75,"offset":1356}}},{"type":"text","value":" image requests through to an HTTP endpoint","position":{"start":{"line":32,"column":75,"offset":1356},"end":{"line":32,"column":118,"offset":1399}}}],"position":{"start":{"line":32,"column":1,"offset":1282},"end":{"line":32,"column":118,"offset":1399}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/spanishdict/ghost-s3-compat","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"s3-store","position":{"start":{"line":33,"column":4,"offset":1403},"end":{"line":33,"column":12,"offset":1411}}}],"position":{"start":{"line":33,"column":3,"offset":1402},"end":{"line":33,"column":61,"offset":1460}}},{"type":"text","value":" saves to Amazon S3 and proxies requests to S3","position":{"start":{"line":33,"column":61,"offset":1460},"end":{"line":33,"column":107,"offset":1506}}}],"position":{"start":{"line":33,"column":1,"offset":1400},"end":{"line":33,"column":107,"offset":1506}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/colinmeinke/ghost-storage-adapter-s3","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"s3-store","position":{"start":{"line":34,"column":4,"offset":1510},"end":{"line":34,"column":12,"offset":1518}}}],"position":{"start":{"line":34,"column":3,"offset":1509},"end":{"line":34,"column":70,"offset":1576}}},{"type":"text","value":" saves to Amazon S3 and works with 0.10+","position":{"start":{"line":34,"column":70,"offset":1576},"end":{"line":34,"column":110,"offset":1616}}}],"position":{"start":{"line":34,"column":1,"offset":1507},"end":{"line":34,"column":110,"offset":1616}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Minwe/qn-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"qn-store","position":{"start":{"line":35,"column":4,"offset":1620},"end":{"line":35,"column":12,"offset":1628}}}],"position":{"start":{"line":35,"column":3,"offset":1619},"end":{"line":35,"column":48,"offset":1664}}},{"type":"text","value":" saves to Qiniu","position":{"start":{"line":35,"column":48,"offset":1664},"end":{"line":35,"column":63,"offset":1679}}}],"position":{"start":{"line":35,"column":1,"offset":1617},"end":{"line":35,"column":63,"offset":1679}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/mmornati/ghost-cloudinary-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-cloudinary-store","position":{"start":{"line":36,"column":4,"offset":1683},"end":{"line":36,"column":26,"offset":1705}}}],"position":{"start":{"line":36,"column":3,"offset":1682},"end":{"line":36,"column":79,"offset":1758}}},{"type":"text","value":" saves to Cloudinary","position":{"start":{"line":36,"column":79,"offset":1758},"end":{"line":36,"column":99,"offset":1778}}}],"position":{"start":{"line":36,"column":1,"offset":1680},"end":{"line":36,"column":99,"offset":1778}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/eexit/ghost-storage-cloudinary","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-storage-cloudinary","position":{"start":{"line":37,"column":4,"offset":1782},"end":{"line":37,"column":28,"offset":1806}}}],"position":{"start":{"line":37,"column":3,"offset":1781},"end":{"line":37,"column":80,"offset":1858}}},{"type":"text","value":" saves to Cloudinary with RetinaJS support","position":{"start":{"line":37,"column":80,"offset":1858},"end":{"line":37,"column":122,"offset":1900}}}],"position":{"start":{"line":37,"column":1,"offset":1779},"end":{"line":37,"column":122,"offset":1900}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/sanddudu/upyun-ghost-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"upyun-ghost-store","position":{"start":{"line":38,"column":4,"offset":1904},"end":{"line":38,"column":21,"offset":1921}}}],"position":{"start":{"line":38,"column":3,"offset":1903},"end":{"line":38,"column":69,"offset":1969}}},{"type":"text","value":" saves to Upyun","position":{"start":{"line":38,"column":69,"offset":1969},"end":{"line":38,"column":84,"offset":1984}}}],"position":{"start":{"line":38,"column":1,"offset":1901},"end":{"line":38,"column":84,"offset":1984}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/pupboss/ghost-upyun-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-upyun-store","position":{"start":{"line":39,"column":4,"offset":1988},"end":{"line":39,"column":21,"offset":2005}}}],"position":{"start":{"line":39,"column":3,"offset":1987},"end":{"line":39,"column":68,"offset":2052}}},{"type":"text","value":" saves to Upyun","position":{"start":{"line":39,"column":68,"offset":2052},"end":{"line":39,"column":83,"offset":2067}}}],"position":{"start":{"line":39,"column":1,"offset":1985},"end":{"line":39,"column":83,"offset":2067}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/robincsamuel/ghost-google-drive","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-google-drive","position":{"start":{"line":40,"column":4,"offset":2071},"end":{"line":40,"column":22,"offset":2089}}}],"position":{"start":{"line":40,"column":3,"offset":2070},"end":{"line":40,"column":75,"offset":2142}}},{"type":"text","value":" saves to Google Drive","position":{"start":{"line":40,"column":75,"offset":2142},"end":{"line":40,"column":97,"offset":2164}}}],"position":{"start":{"line":40,"column":1,"offset":2068},"end":{"line":40,"column":97,"offset":2164}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/tparnell8/ghost-azurestorage","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-azure-storage","position":{"start":{"line":41,"column":4,"offset":2168},"end":{"line":41,"column":23,"offset":2187}}}],"position":{"start":{"line":41,"column":3,"offset":2167},"end":{"line":41,"column":73,"offset":2237}}},{"type":"text","value":" saves to Azure Storage","position":{"start":{"line":41,"column":73,"offset":2237},"end":{"line":41,"column":96,"offset":2260}}}],"position":{"start":{"line":41,"column":1,"offset":2165},"end":{"line":41,"column":96,"offset":2260}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/wrenth04/ghost-imgur","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-imgur","position":{"start":{"line":42,"column":4,"offset":2264},"end":{"line":42,"column":15,"offset":2275}}}],"position":{"start":{"line":42,"column":3,"offset":2263},"end":{"line":42,"column":57,"offset":2317}}},{"type":"text","value":" saves to Imgur","position":{"start":{"line":42,"column":57,"offset":2317},"end":{"line":42,"column":72,"offset":2332}}}],"position":{"start":{"line":42,"column":1,"offset":2261},"end":{"line":42,"column":72,"offset":2332}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/thombuchi/ghost-google-cloud-storage","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"google-cloud-storage","position":{"start":{"line":43,"column":4,"offset":2336},"end":{"line":43,"column":24,"offset":2356}}}],"position":{"start":{"line":43,"column":3,"offset":2335},"end":{"line":43,"column":82,"offset":2414}}},{"type":"text","value":" saves to Google Cloud Storage","position":{"start":{"line":43,"column":82,"offset":2414},"end":{"line":43,"column":112,"offset":2444}}}],"position":{"start":{"line":43,"column":1,"offset":2333},"end":{"line":43,"column":112,"offset":2444}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/MT-Libraries/ghost-oss-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-oss-store","position":{"start":{"line":44,"column":4,"offset":2448},"end":{"line":44,"column":19,"offset":2463}}}],"position":{"start":{"line":44,"column":3,"offset":2447},"end":{"line":44,"column":69,"offset":2513}}},{"type":"text","value":" saves to Aliyun OSS","position":{"start":{"line":44,"column":69,"offset":2513},"end":{"line":44,"column":89,"offset":2533}}}],"position":{"start":{"line":44,"column":1,"offset":2445},"end":{"line":44,"column":89,"offset":2533}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/martiendt/ghost-storage-adapter-b2","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-b2","position":{"start":{"line":45,"column":4,"offset":2537},"end":{"line":45,"column":12,"offset":2545}}}],"position":{"start":{"line":45,"column":3,"offset":2536},"end":{"line":45,"column":68,"offset":2601}}},{"type":"text","value":" saves to Backblaze B2","position":{"start":{"line":45,"column":68,"offset":2601},"end":{"line":45,"column":90,"offset":2623}}}],"position":{"start":{"line":45,"column":1,"offset":2534},"end":{"line":45,"column":90,"offset":2623}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/ifvictr/ghost-github","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-github","position":{"start":{"line":46,"column":4,"offset":2627},"end":{"line":46,"column":16,"offset":2639}}}],"position":{"start":{"line":46,"column":3,"offset":2626},"end":{"line":46,"column":58,"offset":2681}}},{"type":"text","value":" saves to GitHub","position":{"start":{"line":46,"column":58,"offset":2681},"end":{"line":46,"column":74,"offset":2697}}}],"position":{"start":{"line":46,"column":1,"offset":2624},"end":{"line":46,"column":74,"offset":2697}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/zce/pages-store","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"pages-store","position":{"start":{"line":47,"column":4,"offset":2701},"end":{"line":47,"column":15,"offset":2712}}}],"position":{"start":{"line":47,"column":3,"offset":2700},"end":{"line":47,"column":52,"offset":2749}}},{"type":"text","value":" saves to GitHub Pages or other pages service, e.g. Coding Pages","position":{"start":{"line":47,"column":52,"offset":2749},"end":{"line":47,"column":116,"offset":2813}}}],"position":{"start":{"line":47,"column":1,"offset":2698},"end":{"line":47,"column":116,"offset":2813}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/bartt/ghost-webdav-storage-adapter","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"WebDAV Storage","position":{"start":{"line":48,"column":4,"offset":2817},"end":{"line":48,"column":18,"offset":2831}}}],"position":{"start":{"line":48,"column":3,"offset":2816},"end":{"line":48,"column":74,"offset":2887}}},{"type":"text","value":" saves to a WebDAV server.","position":{"start":{"line":48,"column":74,"offset":2887},"end":{"line":48,"column":100,"offset":2913}}}],"position":{"start":{"line":48,"column":1,"offset":2814},"end":{"line":48,"column":100,"offset":2913}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/ZhelinCheng/ghost-qcloud-cos","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"ghost-qcloud-cos","position":{"start":{"line":49,"column":4,"offset":2917},"end":{"line":49,"column":20,"offset":2933}}}],"position":{"start":{"line":49,"column":3,"offset":2916},"end":{"line":49,"column":70,"offset":2983}}},{"type":"text","value":" saves to Tencent Cloud COS.","position":{"start":{"line":49,"column":70,"offset":2983},"end":{"line":49,"column":98,"offset":3011}}}],"position":{"start":{"line":49,"column":1,"offset":2914},"end":{"line":49,"column":98,"offset":3011}}},{"type":"text","value":"\n"}],"position":{"start":{"line":31,"column":1,"offset":1126},"end":{"line":49,"column":98,"offset":3011}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"creating-a-custom-storage-adapter"},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-custom-storage-adapter","aria-label":"creating a custom storage adapter permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Creating a custom storage adapter","position":{"start":{"line":52,"column":4,"offset":3017},"end":{"line":52,"column":37,"offset":3050}}}],"position":{"start":{"line":52,"column":1,"offset":3014},"end":{"line":52,"column":37,"offset":3050}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In order to replace the storage module, use these requirements. You can also take a look at our ","position":{"start":{"line":54,"column":1,"offset":3052},"end":{"line":54,"column":97,"offset":3148}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/TryGhost/Ghost/blob/master/core/server/adapters/storage/LocalFileStorage.js","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"default local storage implementation","position":{"start":{"line":54,"column":98,"offset":3149},"end":{"line":54,"column":134,"offset":3185}}}],"position":{"start":{"line":54,"column":97,"offset":3148},"end":{"line":54,"column":231,"offset":3282}}},{"type":"text","value":".","position":{"start":{"line":54,"column":231,"offset":3282},"end":{"line":54,"column":232,"offset":3283}}}],"position":{"start":{"line":54,"column":1,"offset":3052},"end":{"line":54,"column":232,"offset":3283}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"location"},"children":[{"type":"element","tagName":"a","properties":{"href":"#location","aria-label":"location permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Location","position":{"start":{"line":56,"column":6,"offset":3290},"end":{"line":56,"column":14,"offset":3298}}}],"position":{"start":{"line":56,"column":1,"offset":3285},"end":{"line":56,"column":14,"offset":3298}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Create a new folder named ","position":{"start":{"line":58,"column":4,"offset":3303},"end":{"line":58,"column":30,"offset":3329}}},{"type":"raw","value":"<code class=\"language-text\">storage</code>","position":{"start":{"line":58,"column":30,"offset":3329},"end":{"line":58,"column":39,"offset":3338}}},{"type":"text","value":" inside ","position":{"start":{"line":58,"column":39,"offset":3338},"end":{"line":58,"column":47,"offset":3346}}},{"type":"raw","value":"<code class=\"language-text\">content/adapters</code>","position":{"start":{"line":58,"column":47,"offset":3346},"end":{"line":58,"column":65,"offset":3364}}}],"position":{"start":{"line":58,"column":1,"offset":3300},"end":{"line":58,"column":65,"offset":3364}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Inside of ","position":{"start":{"line":59,"column":4,"offset":3368},"end":{"line":59,"column":14,"offset":3378}}},{"type":"raw","value":"<code class=\"language-text\">content/adapters/storage</code>","position":{"start":{"line":59,"column":14,"offset":3378},"end":{"line":59,"column":40,"offset":3404}}},{"type":"text","value":" create a file or a folder: ","position":{"start":{"line":59,"column":40,"offset":3404},"end":{"line":59,"column":68,"offset":3432}}},{"type":"raw","value":"<code class=\"language-text\">content/adapters/storage/my-module.js</code>","position":{"start":{"line":59,"column":68,"offset":3432},"end":{"line":59,"column":107,"offset":3471}}},{"type":"text","value":" or ","position":{"start":{"line":59,"column":107,"offset":3471},"end":{"line":59,"column":111,"offset":3475}}},{"type":"raw","value":"<code class=\"language-text\">content/adapters/storage/my-module</code>","position":{"start":{"line":59,"column":111,"offset":3475},"end":{"line":59,"column":147,"offset":3511}}},{"type":"text","value":" - if using a folder, create a file called ","position":{"start":{"line":59,"column":147,"offset":3511},"end":{"line":59,"column":190,"offset":3554}}},{"type":"raw","value":"<code class=\"language-text\">index.js</code>","position":{"start":{"line":59,"column":190,"offset":3554},"end":{"line":59,"column":200,"offset":3564}}},{"type":"text","value":" inside it","position":{"start":{"line":59,"column":200,"offset":3564},"end":{"line":59,"column":210,"offset":3574}}}],"position":{"start":{"line":59,"column":1,"offset":3365},"end":{"line":59,"column":210,"offset":3574}}},{"type":"text","value":"\n"}],"position":{"start":{"line":58,"column":1,"offset":3300},"end":{"line":59,"column":210,"offset":3574}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"base-adapter-class-inheritance"},"children":[{"type":"element","tagName":"a","properties":{"href":"#base-adapter-class-inheritance","aria-label":"base adapter class inheritance permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Base adapter class inheritance","position":{"start":{"line":61,"column":6,"offset":3581},"end":{"line":61,"column":36,"offset":3611}}}],"position":{"start":{"line":61,"column":1,"offset":3576},"end":{"line":61,"column":36,"offset":3611}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A custom storage adapter must inherit from your base storage adapter. By default the Base Storage Adapter is installed by Ghost and should be available in your custom adapter.","position":{"start":{"line":63,"column":1,"offset":3613},"end":{"line":63,"column":176,"offset":3788}}}],"position":{"start":{"line":63,"column":1,"offset":3613},"end":{"line":63,"column":176,"offset":3788}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> BaseAdapter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ghost-storage-base'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCustomAdapter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseAdapter</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> MyCustomAdapter<span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":65,"column":1,"offset":3790},"end":{"line":77,"column":4,"offset":3987}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"required-methods"},"children":[{"type":"element","tagName":"a","properties":{"href":"#required-methods","aria-label":"required methods permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Required methods","position":{"start":{"line":79,"column":6,"offset":3994},"end":{"line":79,"column":22,"offset":4010}}}],"position":{"start":{"line":79,"column":1,"offset":3989},"end":{"line":79,"column":22,"offset":4010}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your custom storage adapter must implement five required functions: ","position":{"start":{"line":81,"column":1,"offset":4012},"end":{"line":81,"column":69,"offset":4080}}}],"position":{"start":{"line":81,"column":1,"offset":4012},"end":{"line":81,"column":69,"offset":4080}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">save</code>","position":{"start":{"line":82,"column":3,"offset":4083},"end":{"line":82,"column":9,"offset":4089}}},{"type":"text","value":" - The ","position":{"start":{"line":82,"column":9,"offset":4089},"end":{"line":82,"column":16,"offset":4096}}},{"type":"raw","value":"<code class=\"language-text\">.save()</code>","position":{"start":{"line":82,"column":16,"offset":4096},"end":{"line":82,"column":25,"offset":4105}}},{"type":"text","value":" method stores the image and returns a promise which resolves the path from which the image should be requested in future.","position":{"start":{"line":82,"column":25,"offset":4105},"end":{"line":82,"column":147,"offset":4227}}}],"position":{"start":{"line":82,"column":1,"offset":4081},"end":{"line":82,"column":147,"offset":4227}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">exists</code>","position":{"start":{"line":83,"column":3,"offset":4230},"end":{"line":83,"column":11,"offset":4238}}},{"type":"text","value":" - Used by the base storage adapter to check whether a file exists or not","position":{"start":{"line":83,"column":11,"offset":4238},"end":{"line":83,"column":84,"offset":4311}}}],"position":{"start":{"line":83,"column":1,"offset":4228},"end":{"line":83,"column":84,"offset":4311}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">serve</code>","position":{"start":{"line":84,"column":3,"offset":4314},"end":{"line":84,"column":10,"offset":4321}}},{"type":"text","value":" - Ghost calls ","position":{"start":{"line":84,"column":10,"offset":4321},"end":{"line":84,"column":25,"offset":4336}}},{"type":"raw","value":"<code class=\"language-text\">.serve()</code>","position":{"start":{"line":84,"column":25,"offset":4336},"end":{"line":84,"column":35,"offset":4346}}},{"type":"text","value":" as part of its middleware stack, and mounts the returned function as the middleware for serving images","position":{"start":{"line":84,"column":35,"offset":4346},"end":{"line":84,"column":138,"offset":4449}}}],"position":{"start":{"line":84,"column":1,"offset":4312},"end":{"line":84,"column":138,"offset":4449}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">delete</code>","position":{"start":{"line":85,"column":3,"offset":4452},"end":{"line":85,"column":11,"offset":4460}}}],"position":{"start":{"line":85,"column":1,"offset":4450},"end":{"line":85,"column":11,"offset":4460}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">read</code>","position":{"start":{"line":86,"column":3,"offset":4463},"end":{"line":86,"column":9,"offset":4469}}}],"position":{"start":{"line":86,"column":1,"offset":4461},"end":{"line":86,"column":9,"offset":4469}}},{"type":"text","value":"\n"}],"position":{"start":{"line":82,"column":1,"offset":4081},"end":{"line":86,"column":9,"offset":4469}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> BaseAdapter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ghost-storage-base'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCustomAdapter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseAdapter</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">customServe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> MyCustomAdapter<span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":88,"column":1,"offset":4471},"end":{"line":122,"column":4,"offset":4829}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"summary"},"children":[{"type":"element","tagName":"a","properties":{"href":"#summary","aria-label":"summary permalink","class":"anchor"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Summary","position":{"start":{"line":125,"column":4,"offset":4835},"end":{"line":125,"column":11,"offset":4842}}}],"position":{"start":{"line":125,"column":1,"offset":4832},"end":{"line":125,"column":11,"offset":4842}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You have discovered how to use a custom storage module to replace the storage layer which handles images with custom code.","position":{"start":{"line":126,"column":1,"offset":4843},"end":{"line":126,"column":123,"offset":4965}}}],"position":{"start":{"line":126,"column":1,"offset":4843},"end":{"line":126,"column":123,"offset":4965}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's good practise to create a public GitHub repository to make your module available for others and you can share your new module in our ","position":{"start":{"line":128,"column":1,"offset":4967},"end":{"line":128,"column":139,"offset":5105}}},{"type":"element","tagName":"a","properties":{"href":"https://forum.ghost.org/","target":"_blank","rel":"nofollow noopener noreferrer"},"children":[{"type":"text","value":"forum","position":{"start":{"line":128,"column":140,"offset":5106},"end":{"line":128,"column":145,"offset":5111}}}],"position":{"start":{"line":128,"column":139,"offset":5105},"end":{"line":128,"column":172,"offset":5138}}},{"type":"text","value":".","position":{"start":{"line":128,"column":172,"offset":5138},"end":{"line":128,"column":173,"offset":5139}}}],"position":{"start":{"line":128,"column":1,"offset":4967},"end":{"line":128,"column":173,"offset":5139}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":130,"column":1,"offset":5141}}}}