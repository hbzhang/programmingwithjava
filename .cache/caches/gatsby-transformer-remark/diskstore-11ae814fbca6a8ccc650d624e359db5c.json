{"expireTime":9007200813127422000,"key":"transformer-remark-markdown-html-6f672649af56e587db58f1af1353c596-gatsby-remark-imagesgatsby-remark-snippetsgatsby-remark-autolink-headersgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-external-links-","val":"<p>Learn more about using the Ghost-CLI for a smooth install, run and update process when working with Ghost, and how to take advantage of it's flexibility.</p>\n<h2 id=\"overview\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h2>\n<p>Below is a list of the things the <code class=\"language-text\">ghost-cli</code> handles:</p>\n<ul>\n<li>Checks for common environment problems</li>\n<li>Creates a <strong>useful folder structure</strong></li>\n<li>Provides for production or development installs</li>\n<li>Allows for <strong>upgrading and rolling back</strong></li>\n<li>Handles <strong>user management and permissions</strong></li>\n<li>Configures Ghost</li>\n<li>Configures <strong>NGINX</strong></li>\n<li>Sets up <strong>MySQL</strong></li>\n<li>Configures <strong>systemd</strong></li>\n<li>Allows access to Ghost log files</li>\n<li>Provides a management console to start/stop/restart Ghost</li>\n</ul>\n<h2 id=\"folder-structure\"><a href=\"#folder-structure\" aria-label=\"folder structure permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Folder Structure</h2>\n<p>When you install Ghost using Ghost-CLI, the local directory will be setup with a set of folders designed to keep the various parts of your install separate. After installing Ghost, you will have a folder structure like this which should not be changed:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">config.<span class=\"token punctuation\">[</span>env<span class=\"token punctuation\">]</span>.json <span class=\"token comment\">#env is production or development</span>\n/content <span class=\"token comment\">#owned by ghost user</span>\n/current\n/system <span class=\"token comment\">#production only</span>\n/versions\n.ghost-cli</code></pre></div>\n<h4 id=\"configenvjson\"><a href=\"#configenvjson\" aria-label=\"configenvjson permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>config.[env].json</h4>\n<p>These files contain the config for your site, read more here.\nYou can add information about your site and it's theme in these files.</p>\n<h4 id=\"content\"><a href=\"#content\" aria-label=\"content permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/content</h4>\n<p>Themes, images, redirects, custom adapters will live in this folder. This folder is owned by the ghost user and it is recommended to keep a backup of this folder.</p>\n<h4 id=\"current\"><a href=\"#current\" aria-label=\"current permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/current</h4>\n<p>A symlink to the currently active version of Ghost. To upgrade your version of Ghost, use the <a href=\"/api/ghost-cli/update/\">update</a> commands and guides.</p>\n<h4 id=\"system\"><a href=\"#system\" aria-label=\"system permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/system</h4>\n<p>This folder only appears on production installs. It contains additional tools and configuration files needed for nginx, systemd and for generating letsencrypt certificates.</p>\n<h4 id=\"systemfiles\"><a href=\"#systemfiles\" aria-label=\"systemfiles permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/system/files</h4>\n<p>Inside the <code class=\"language-text\">/system</code> folder is a files folder, this is the location of any configuration that ghost-cli creates for 3rd party tools such as nginx and systemd. These files are always symlinked into their correct locations. They can be customised if needed.</p>\n<h4 id=\"versions\"><a href=\"#versions\" aria-label=\"versions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/versions</h4>\n<p>Contains the versions of Ghost which are currently available on your machine. There's no need to worry about this unless space is a particular issue for you.</p>\n<h4 id=\"ghost-cli\"><a href=\"#ghost-cli\" aria-label=\"ghost cli permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.ghost-cli</h4>\n<p>This file contains some information that Ghost-CLI needs about your install in order to perform certain tasks. There's no need to worry about this file and it's recommended that you don't edit it!</p>\n<h2 id=\"nginx\"><a href=\"#nginx\" aria-label=\"nginx permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NGINX</h2>\n<p>NGINX is the web server that backs your Ghost publication. The CLI generates a NGINX config file for your domain and saves it in <code class=\"language-text\">[path/to/ghost/]system/files/your-domain.com.conf</code> with a secondary config file for SSL: <code class=\"language-text\">[path/to/ghost/]system/files/your-domain.com-ssl.conf</code>.</p>\n<h2 id=\"ssl\"><a href=\"#ssl\" aria-label=\"ssl permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSL</h2>\n<p>The CLI generates a free SSL certificate from <a href=\"#lets-encrypt\">Let’s Encrypt</a> using <a href=\"#lets-encrypt\">acme.sh</a> and a secondary NGINX config file to serve https traffic via port 443.</p>\n<h4 id=\"ssl-configuration\"><a href=\"#ssl-configuration\" aria-label=\"ssl configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSL configuration</h4>\n<p>After a successful ssl setup, you can find your ssl certificate in <code class=\"language-text\">/etc/letsencrypt</code>.</p>\n<h4 id=\"ssl-for-additional-domains\"><a href=\"#ssl-for-additional-domains\" aria-label=\"ssl for additional domains permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSL for additional domains</h4>\n<p>You may wish to have multiple domains that redirect to your site, e.g. to have an extra TLD or to support www. domains. <strong>Ghost itself can only ever have one domain pointed at it.</strong> This is intentional for SEO purposes, however you can always redirect extra domains to your Ghost install using nginx.</p>\n<p>If you want to redirect an HTTPS domain, you must have a certificate for it. If you want to use Ghost-CLI to generate an extra SSL setup, follow this guide:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Determine your secondary URL</span>\nghost config url https://my-second-domain.com\n\n<span class=\"token comment\"># Get Ghost-CLI to generate an SSL setup for you:</span>\nghost setup nginx ssl\n\n<span class=\"token comment\"># Change your config back to your canonical domain</span>\nghost config url https://my-canonical-domain.com\n\n<span class=\"token comment\"># Edit the nginx config files for your second domain to redirect to your canonical domain. In both files replace the content of the first location block with:</span>\n<span class=\"token keyword\">return</span> 301 https://my-canonical-domain.com<span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># Get nginx to verify your config</span>\n<span class=\"token function\">sudo</span> nginx -t\n\n<span class=\"token comment\"># Reload nginx with your new config</span>\n<span class=\"token function\">sudo</span> nginx -s reload</code></pre></div>\n<h4 id=\"lets-encrypt\"><a href=\"#lets-encrypt\" aria-label=\"lets encrypt permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let's Encrypt</h4>\n<p><a href=\"https://letsencrypt.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Let’s Encrypt</a> provides SSL certificates that are accepted by browsers free of charge! This is provided by the non-profit Internet Security Research Group (ISRG). The Ghost-CLI will offer you to generate a free SSL certificate as well as renew it every 60 days.</p>\n<p>Ghost uses <a href=\"https://github.com/Neilpang/acme.sh\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">acme.sh</a> for provisioning and renewing SSL certificates from Let's Encrypt. You can call <code class=\"language-text\">acme.sh</code> manually if you need to perform extra tasks. The following command will output all available options:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">/etc/letsencrypt/acme.sh --home <span class=\"token string\">\"/etc/letsencrypt\"</span></code></pre></div>\n<h2 id=\"systemd\"><a href=\"#systemd\" aria-label=\"systemd permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Systemd</h2>\n<p><code class=\"language-text\">systemd</code> is the default way of starting and stopping applications on Ubuntu. The advantage is that if Ghost crashes, <code class=\"language-text\">systemd</code> will restart your instance. This is the default recommended process manager.</p>\n<h2 id=\"permissions\"><a href=\"#permissions\" aria-label=\"permissions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Permissions</h2>\n<p>Ghost-CLI will create a new system user and user-group called <code class=\"language-text\">ghost</code> during the installation process. The <code class=\"language-text\">ghost</code> user will be used to run your Ghost process in <code class=\"language-text\">systemd</code>.</p>\n<p>This means that Ghost will run with a user that has no system-wide permissions or a shell that can be used (similar to other services such as NGINX). Sudo is required to modify files in the The  <code class=\"language-text\">&lt;install-directory&gt;/content/</code>.</p>\n<p>To prevent accidental permissions changes, it's advisable to execute tasks such as image upload or theme upload using Ghost admin.</p>\n<h3 id=\"file-permissions\"><a href=\"#file-permissions\" aria-label=\"file permissions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>File Permissions</h3>\n<p>The <code class=\"language-text\">ghost-cli</code> enforces default linux permissions (via <code class=\"language-text\">ghost doctor</code> hooks) for installations.</p>\n<ul>\n<li>For normal users, default directory permissions are 775, and default file permissions are 664.</li>\n<li>For root users, default directory permissions are 755, and default file permissions are 644.</li>\n</ul>\n<p>Running ghost install as the non-root user will result in directories created with 775 (<code class=\"language-text\">drwxrwxr-x</code>) permissions and file with 664 (<code class=\"language-text\">-rw-rw-r--</code>) permissions.</p>\n<p>These file permissions don't need to be changed. The only change that is executed by ghost-cli is changing ownership, file permissions stay untouched.</p>\n<p>If permissions were changed, the following two commands will revert file and directory permissions to the ones of a non-root user.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">find</span> /var/www/ghost/* -type d -exec <span class=\"token function\">chmod</span> 775 <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> \\<span class=\"token punctuation\">;</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">find</span> /var/www/ghost/* -type f -exec <span class=\"token function\">chmod</span> 664 <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> \\<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The cli doesn't support directory flags such as <code class=\"language-text\">setuid</code> and <code class=\"language-text\">setguid</code>). If your commands keep failing because of file permissions, ensure your directories have no flags!</p>\n<h2 id=\"keeping-ghost-cli-updated\"><a href=\"#keeping-ghost-cli-updated\" aria-label=\"keeping ghost cli updated permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Keeping Ghost CLI updated</h2>\n<p>It's important to keep <code class=\"language-text\">ghost-cli</code> up to date, as well as Ghost. If your CLI is out of date and you've been running certain commands in your terminal then you may see an error message that your version of the CLI is outdated. To upgrade use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Using npm</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> i -g ghost-cli@latest\n\n<span class=\"token comment\"># Using yarn</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">yarn</span> global <span class=\"token function\">add</span> ghost-cli@latest</code></pre></div>"}